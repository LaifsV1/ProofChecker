(*ERRORS:*)

(*-------------------------------------------------------------------*)
# build_closure [(App (Var "x",Nil), Zero);(App (Nil,Nil), Zero)];;
Exception: Failure "ori2: Var(_c_116_)".

(* IMPROVED MESSAGE *)
# build_closure [(App (Var "x",Nil), Zero);(App (Nil,Nil), Zero)];;
Exception: Failure "ori3: App(Var(_c_39_),Var(_c_39_)) = Var(_c_47_)".

(**FIXED: removed (_ , Var c') match from ori_2 and ori_3 since they should only be dealing with vars.
                  Also added check for membership of (c) in k for (Var c, Var d') where (d) is in k.*)
(*-------------------------------------------------------------------*)
(*********************************************************************)
(*********************************************************************)
(*********************************************************************)
(*-------------------------------------------------------------------*)
# cong_entails [(Suc(Boolean(true)),Var "x");(Var "y", Suc(Boolean(true)))]
               (Suc(Boolean(true)),Var "x");;
- : unit option = None

(* DETAILED RUN: *)
[] [(Suc(Boolean(true)),Var "x"); (Var "y", Suc(Boolean(true)))] []

    ext Boolean(true),_c_6_
        [_c_6_] [(Suc(_c_6_),Var "x"); (Var "y", Suc(_c_6_))] [Boolean(true),_c_6_]
    ext Suc(Var("_c_6_")),_c_10_
        [_c_10_] [(_c_10_,Var "x"); (Var "y", _c_10_)] [Boolean(true),_c_6_;Suc(Var("_c_6_")),_c_10_;]
    ext Var("x"),_c_13_
        [_c_13_] [(_c_10_,_c_13_); (Var "y", _c_10_)] [Boolean(true),_c_6_;Suc(Var("_c_6_")),_c_10_;Var("x"),_c_13_;]
    ext Var("y"),_c_16_
        [_c_16_] [(_c_10_,_c_13_); (_c_16_, _c_10_)] [Boolean(true),_c_6_;Suc(Var("_c_6_")),_c_10_;Var("x"),_c_13_;Var("y"),_c_16_;]
    ori _2_c_10_,_c_13_
        [] [(_c_16_, _c_10_)] [Boolean(true),_c_6_;Suc(Var("_c_6_")),_c_10_;Var("x"),_c_13_;Var("y"),_c_16_;_c_10_,_c_13_;]
    ori _3_c_10_,_c_16_
        [] [] [Boolean(true),_c_6_;Suc(Var("_c_6_")),_c_10_;Var("x"),_c_13_;Var("y"),_c_16_;_c_10_,_c_13_;_c_10_,_c_16_;] (**ERROR HERE**)
    com
        [] [] [Boolean(true),_c_6_;Suc(Var("_c_6_")),_c_16_;Var("x"),_c_13_;Var("y"),_c_16_;_c_10_,_c_13_;_c_10_,_c_16_;]
(***PROBLEM: deduction is not dealing with C-rules. i.e. (_c_10_,_c_13_) and (_c_10_,_c_16_) are not being dealt with ***)
(** FIXED: Added deduction rule for C-rules**)
(*-------------------------------------------------------------------*)
(*********************************************************************)
(*********************************************************************)
(*********************************************************************)
(*-------------------------------------------------------------------*)
# cong_entails [(Var("x"),Var("y"));(Var("x"),Zero)]
               (Var("x"),Var("y"));;
        - : unit option = None

(* DETAILED RUN *)
[] [(Var("x"),Var("y"));(Var("x"),Zero)] []

ext Var("x"),_c_4_
	[_c_4_] [(_c_4_,Var("y"));(_c_4_,Zero)] [Var("x"),_c_4_]
ext Var("y"),_c_7_
	[_c_7_] [(_c_4_,_c_7_);(_c_4_,Zero)] [Var("x"),_c_4_;Var("y"),_c_7_]
ext Zero,_c_9_
	[_c_9_] [(_c_4_,_c_7_);(_c_4_,_c_9_)] [Var("x"),_c_4_;Var("y"),_c_7_;Zero,_c_9_]
ori_2 _c_4_,_c_9_
	[] [(_c_4_,_c_7_)] [Var("x"),_c_4_;Var("y"),_c_7_;Zero,_c_9_;_c_4_,_c_9_]
ori_2 _c_4_,_c_7_
	[] [] [Var("x"),_c_4_;Var("y"),_c_7_;Zero,_c_9_;_c_4_,_c_9_;_c_4_,_c_7_]
ded2 (_c_4_,_c_7_) and (_c_4_,_c_9_)
	[] [(_c_4_,_c_9_)] [Var("x"),_c_4_;Var("y"),_c_7_;Zero,_c_9_;_c_4_,_c_9_;] (**ERROR HERE**)
ori_2 _c_4_,_c_9_
	[] [] [Var("x"),_c_4_;Var("y"),_c_7_;Zero,_c_9_;_c_4_,_c_9_;]
com
	[] [] [Var("x"),_c_4_;Var("y"),_c_7_;Zero,_c_9_;_c_4_,_c_9_;]
(***PROBLEM: ded2 was putting (c,d') for (c,d) and (c,d'). Should be (d,d') instead.***)
(** FIXED: Changed (c,d') with (d,d')**)
(*-------------------------------------------------------------------*)